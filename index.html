<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English 8 Global Success (Unit 7-9) - Song ng·ªØ Vi·ªát/Anh</title>
    <style>
        :root { --primary: #00695c; --secondary: #4db6ac; --bg: #e0f2f1; --explain-bg: #fffde7; --explain-text: #f57f17; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #b2dfdb 0%, #e0f2f1 100%); margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; user-select: none; padding-bottom: 50px; }
        
        .falling-flowers { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .flower { position: absolute; top: -20px; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(105vh) rotate(720deg); } }
        
        .container { 
            background: rgba(255,255,255,0.98); 
            border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); 
            padding: 30px; 
            max-width: 900px; 
            width: 90%; 
            margin-top: 30px; 
            text-align: center; 
            z-index: 1; 
            border-top: 5px solid var(--primary); 
            position: relative;
            min-height: 300px;
            display: flex; flex-direction: column; justify-content: center;
        }
        
        .screen { width: 100%; }
        .hidden { display: none !important; }

        /* C√¢u h·ªèi */
        .question-box { 
            background: #fff; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 20px 0; 
            font-size: 1.2rem; 
            color: #263238; 
            font-weight: 600; 
            border: 1px solid #b0bec5; 
            text-align: left;
            line-height: 1.6;
        }
        
        /* B√†i ƒë·ªçc */
        .reading-passage {
            font-weight: normal;
            font-size: 1rem;
            background: #f1f8e9;
            padding: 15px;
            border-left: 4px solid var(--primary);
            margin-bottom: 15px;
            white-space: pre-wrap;
            color: #33691e;
        }

        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        @media (max-width: 600px) { .options-grid { grid-template-columns: 1fr; } }
        
        .btn-option { 
            background: white; 
            border: 2px solid #cfd8dc; 
            padding: 15px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 1.05rem; 
            transition: 0.2s; 
            position: relative; 
            min-height: 50px; 
            width: 100%; 
            text-align: left;
            color: #455a64;
        }
        .btn-option:hover { background: #e0f2f1; transform: translateY(-2px); border-color: var(--primary); color: var(--primary); }
        .btn-option.correct { background: #c8e6c9 !important; border-color: #4caf50 !important; color: #1b5e20; font-weight: bold; }
        .btn-option.wrong { background: #ffcdd2 !important; border-color: #e53935 !important; color: #b71c1c; opacity: 0.7; }
        
        /* KHUNG GI·∫¢I TH√çCH & D·ªäCH */
        .explanation-box { margin-top: 20px; padding: 15px; background-color: var(--explain-bg); color: #333; border-radius: 10px; border-left: 5px solid #fbc02d; text-align: left; font-size: 1rem; animation: fadeIn 0.5s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .explanation-title { font-weight: bold; color: #f57f17; text-decoration: underline; margin-bottom: 5px; display: block; }
        .trans-text { margin-top: 8px; padding-top: 8px; border-top: 1px dashed #ccc; color: #0277bd; font-style: italic; display: block;}

        .btn-main { background: var(--primary); color: white; border: none; padding: 15px 40px; border-radius: 30px; font-size: 1.3rem; cursor: pointer; margin-top: 20px; box-shadow: 0 4px 10px rgba(0, 105, 92, 0.4); transition: transform 0.1s; font-weight: bold; text-transform: uppercase; }
        .btn-main:active { transform: scale(0.95); }
        .btn-next { background: #ffb300; color: #212121; display: none; margin: 20px auto 0; width: 100%; max-width: 300px; }
        
        .info-bar { display: flex; justify-content: space-between; font-weight: bold; color: var(--primary); margin-bottom: 15px; font-size: 1.1rem; border-bottom: 1px solid #b2dfdb; padding-bottom: 10px; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        #music-control { position: fixed; bottom: 20px; right: 20px; width: 50px; height: 50px; border-radius: 50%; background: white; border: 2px solid var(--primary); color: var(--primary); font-size: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 100; transition: all 0.3s; }
        .music-playing { animation: spin 4s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="falling-flowers" id="flowers"></div>
    
    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3" type="audio/mpeg">
    </audio>
    <div id="music-control" onclick="toggleMusic()">üéµ</div>

    <div class="container">
        <div id="start-screen" class="screen">
            <h1 style="color:var(--primary); font-size: 2rem; margin-bottom: 10px;">ENGLISH 8 GLOBAL SUCCESS</h1>
            <h2 style="color: #004d40;">Unit 7 - Unit 8 - Unit 9</h2>
            <div style="font-size: 4rem; margin: 20px;">üáªüá≥ üá¨üáß</div>
            <p style="font-size: 1.1rem;">150 C√¢u h·ªèi - C√≥ D·ªãch Ti·∫øng Vi·ªát</p>
            <button class="btn-main" onclick="startGame()">B·∫ÆT ƒê·∫¶U ‚ñ∂</button>
        </div>

        <div id="game-ui" class="screen hidden">
            <div class="info-bar">
                <span id="score-display">Score: 0</span>
                <span id="progress-display">Question: 1/150</span>
            </div>
            <div class="question-box" id="question-text">Loading...</div>
            <div class="options-grid" id="options-container"></div>
            
            <div id="explanation-area" class="explanation-box hidden">
                <span class="explanation-title">üí° Gi·∫£i th√≠ch:</span>
                <span id="explanation-text"></span>
                <span id="trans-text" class="trans-text"></span>
            </div>

            <button id="btn-next" class="btn-main btn-next" onclick="nextQuestion()">‚û° NEXT QUESTION</button>
        </div>

        <div id="end-screen" class="screen hidden">
            <h1 style="color:var(--primary)">CONGRATULATIONS!</h1>
            <div style="font-size: 4rem; margin: 20px;">üèÜ</div>
            <h2 id="final-score" style="color: #2e7d32; font-size: 2rem;"></h2>
            <p>B·∫°n ƒë√£ ho√†n th√†nh b√†i √¥n t·∫≠p Unit 7-8-9!</p>
            <button class="btn-main" onclick="location.reload()">L√ÄM L·∫†I üîÑ</button>
        </div>
    </div>

<script>
    // ========================================================================
    // DATA: 150 C√ÇU H·ªéI K√àM D·ªäCH NGHƒ®A (trans)
    // ========================================================================
    const rawQuestions = [
        // --- UNIT 7: ENVIRONMENTAL PROTECTION ---
        {
            q: "Choose the word whose underlined part is pronounced differently: <br><u>h</u>onest, <u>h</u>onor, <u>h</u>our, <u>h</u>oney", 
            a: ["honest", "honor", "hour", "honey"], 
            correct: 3, 
            explain: "'honey' ph√°t √¢m l√† /h/ (c√≥ b·∫≠t h∆°i). C√°c t·ª´ c√≤n l·∫°i √¢m 'h' b·ªã c√¢m.",
            trans: "D·ªãch: honest (th·∫≠t th√†), honor (danh d·ª±), hour (gi·ªù), honey (m·∫≠t ong/ng∆∞·ªùi y√™u)."
        },
        {
            q: "Don't drink that water! It's ______.", 
            a: ["contaminated", "pure", "safe", "fresh"], 
            correct: 0, 
            explain: "C·∫ßn t√≠nh t·ª´ mang nghƒ©a ti√™u c·ª±c. Contaminated = √¥ nhi·ªÖm/ƒë·ªôc h·∫°i.",
            trans: "D·ªãch: ƒê·ª´ng u·ªëng n∆∞·ªõc ƒë√≥! N√≥ b·ªã √¥ nhi·ªÖm r·ªìi."
        },
        {
            q: "Factories ______ toxic waste into the river.", 
            a: ["dump", "protect", "recycle", "save"], 
            correct: 0, 
            explain: "Dump waste = ƒë·ªï ch·∫•t th·∫£i b·ª´a b√£i.",
            trans: "D·ªãch: C√°c nh√† m√°y ƒë·ªï ch·∫•t th·∫£i ƒë·ªôc h·∫°i xu·ªëng s√¥ng."
        },
        {
            q: "We should avoid using ______ products like plastic bags.", 
            a: ["single-use", "reusable", "sustainable", "long-term"], 
            correct: 0, 
            explain: "Single-use products = s·∫£n ph·∫©m d√πng m·ªôt l·∫ßn.",
            trans: "D·ªãch: Ch√∫ng ta n√™n tr√°nh s·ª≠ d·ª•ng c√°c s·∫£n ph·∫©m d√πng m·ªôt l·∫ßn nh∆∞ t√∫i nilon."
        },
        {
            q: "The ______ of the ozone layer is a serious problem.", 
            a: ["depletion", "protection", "production", "solution"], 
            correct: 0, 
            explain: "Ozone depletion = s·ª± suy gi·∫£m t·∫ßng ozone.",
            trans: "D·ªãch: S·ª± suy gi·∫£m t·∫ßng ozone l√† m·ªôt v·∫•n ƒë·ªÅ nghi√™m tr·ªçng."
        },
        // Grammar Unit 7
        {
            q: "I will call you ______ I arrive at the airport.", 
            a: ["as soon as", "until", "while", "though"], 
            correct: 0, 
            explain: "As soon as = ngay khi (di·ªÖn t·∫£ h√†nh ƒë·ªông n·ªëi ti·∫øp).",
            trans: "D·ªãch: T√¥i s·∫Ω g·ªçi cho b·∫°n ngay khi t√¥i ƒë·∫øn s√¢n bay."
        },
        {
            q: "______ I was walking to school, I saw a lot of rubbish.", 
            a: ["While", "Before", "After", "Since"], 
            correct: 0, 
            explain: "While + Qu√° kh·ª© ti·∫øp di·ªÖn (h√†nh ƒë·ªông ƒëang x·∫£y ra).",
            trans: "D·ªãch: Trong khi t√¥i ƒëang ƒëi b·ªô ƒë·∫øn tr∆∞·ªùng, t√¥i th·∫•y r·∫•t nhi·ªÅu r√°c."
        },

        // --- UNIT 8: SHOPPING ---
        {
            q: "I usually buy food at the ______ store because it is open 24/7.", 
            a: ["convenience", "department", "specialty", "clothing"], 
            correct: 0, 
            explain: "Convenience store = c·ª≠a h√†ng ti·ªán l·ª£i (m·ªü 24/7).",
            trans: "D·ªãch: T√¥i th∆∞·ªùng mua ƒë·ªì ƒÉn ·ªü c·ª≠a h√†ng ti·ªán l·ª£i v√¨ n√≥ m·ªü c·ª≠a 24/7."
        },
        {
            q: "Can you ______ the price? It's too expensive.", 
            a: ["bargain", "buy", "sell", "pay"], 
            correct: 0, 
            explain: "Bargain = m·∫∑c c·∫£/tr·∫£ gi√°.",
            trans: "D·ªãch: B·∫°n c√≥ th·ªÉ m·∫∑c c·∫£ gi√° kh√¥ng? N√≥ ƒë·∫Øt qu√°."
        },
        {
            q: "Look at the ______! It says $50.", 
            a: ["price tag", "receipt", "bar code", "coupon"], 
            correct: 0, 
            explain: "Price tag = m√°c gi√°/th·∫ª gi√°.",
            trans: "D·ªãch: Nh√¨n v√†o m√°c gi√° k√¨a! N√≥ ghi 50 ƒë√¥ la."
        },
        {
            q: "I bought this shirt on ______; it was 50% off.", 
            a: ["sale", "sell", "sold", "sales"], 
            correct: 0, 
            explain: "On sale = ƒëang gi·∫£m gi√°.",
            trans: "D·ªãch: T√¥i mua chi·∫øc √°o n√†y trong ƒë·ª£t gi·∫£m gi√°; n√≥ ƒë∆∞·ª£c gi·∫£m 50%."
        },
        // Grammar Unit 8 (Schedule)
        {
            q: "The train ______ at 9:00 a.m. tomorrow.", 
            a: ["leaves", "will leave", "leaving", "left"], 
            correct: 0, 
            explain: "L·ªãch tr√¨nh t√†u xe (Timetable) d√πng Hi·ªán t·∫°i ƒë∆°n.",
            trans: "D·ªãch: Chuy·∫øn t√†u r·ªùi ƒëi l√∫c 9 gi·ªù s√°ng mai."
        },
        {
            q: "Our semester ______ on September 5th.", 
            a: ["starts", "will start", "is starting", "start"], 
            correct: 0, 
            explain: "L·ªãch h·ªçc/Khai gi·∫£ng -> Hi·ªán t·∫°i ƒë∆°n.",
            trans: "D·ªãch: H·ªçc k·ª≥ c·ªßa ch√∫ng t√¥i b·∫Øt ƒë·∫ßu v√†o ng√†y 5 th√°ng 9."
        },
        {
            q: "I ______ go to the open-air market, maybe once a year.", 
            a: ["rarely", "always", "usually", "often"], 
            correct: 0, 
            explain: "Once a year = hi·∫øm khi (rarely).",
            trans: "D·ªãch: T√¥i hi·∫øm khi ƒëi ch·ª£ tr·ªùi, c√≥ l·∫Ω m·ªói nƒÉm m·ªôt l·∫ßn."
        },

        // --- UNIT 9: NATURAL DISASTERS ---
        {
            q: "A sudden shaking of the earth's surface is called an ______.", 
            a: ["earthquake", "eruption", "epidemic", "erosion"], 
            correct: 0, 
            explain: "Earthquake = ƒë·ªông ƒë·∫•t.",
            trans: "D·ªãch: S·ª± rung chuy·ªÉn ƒë·ªôt ng·ªôt c·ªßa b·ªÅ m·∫∑t tr√°i ƒë·∫•t ƒë∆∞·ª£c g·ªçi l√† ƒë·ªông ƒë·∫•t."
        },
        {
            q: "The volcanic ______ caused heavy damage.", 
            a: ["eruption", "explosion", "erosion", "election"], 
            correct: 0, 
            explain: "Volcanic eruption = s·ª± phun tr√†o n√∫i l·ª≠a.",
            trans: "D·ªãch: V·ª• phun tr√†o n√∫i l·ª≠a ƒë√£ g√¢y ra thi·ªát h·∫°i n·∫∑ng n·ªÅ."
        },
        {
            q: "Many houses were destroyed by the ______.", 
            a: ["tornado", "sunshine", "breeze", "drizzle"], 
            correct: 0, 
            explain: "Tornado = l·ªëc xo√°y (c√°c t·ª´ c√≤n l·∫°i l√† th·ªùi ti·∫øt nh·∫π).",
            trans: "D·ªãch: Nhi·ªÅu ng√¥i nh√† b·ªã ph√° h·ªßy b·ªüi l·ªëc xo√°y."
        },
        {
            q: "The government provided ______ aid to the affected area.", 
            a: ["emergency", "urgent", "hurry", "quick"], 
            correct: 0, 
            explain: "Emergency aid = vi·ªán tr·ª£ kh·∫©n c·∫•p.",
            trans: "D·ªãch: Ch√≠nh ph·ªß ƒë√£ cung c·∫•p vi·ªán tr·ª£ kh·∫©n c·∫•p cho khu v·ª±c b·ªã ·∫£nh h∆∞·ªüng."
        },
        // Grammar Unit 9 (Past Continuous & Passive)
        {
            q: "I ______ TV at 8 p.m. yesterday.", 
            a: ["was watching", "watched", "am watching", "have watched"], 
            correct: 0, 
            explain: "Th·ªùi ƒëi·ªÉm c·ª• th·ªÉ trong qu√° kh·ª© (8h t·ªëi qua) -> Qu√° kh·ª© ti·∫øp di·ªÖn.",
            trans: "D·ªãch: T√¥i ƒëang xem TV l√∫c 8 gi·ªù t·ªëi qua."
        },
        {
            q: "While we ______ dinner, the lights went out.", 
            a: ["were having", "had", "are having", "have"], 
            correct: 0, 
            explain: "While + QKTD (h√†nh ƒë·ªông d√†i), QKƒê (h√†nh ƒë·ªông ng·∫Øn xen v√†o).",
            trans: "D·ªãch: Trong khi ch√∫ng t√¥i ƒëang ƒÉn t·ªëi, ƒë√®n v·ª•t t·∫Øt."
        },
        {
            q: "The house ______ by the storm last week.", 
            a: ["was destroyed", "destroyed", "is destroyed", "has been destroyed"], 
            correct: 0, 
            explain: "B·ªã ƒë·ªông qu√° kh·ª© ƒë∆°n: was/were + V3/ed.",
            trans: "D·ªãch: Ng√¥i nh√† ƒë√£ b·ªã ph√° h·ªßy b·ªüi c∆°n b√£o tu·∫ßn tr∆∞·ªõc."
        },

        // --- SENTENCE BUILDING ---
        {
            q: "Rearrange: protect / environment / We / should / the / .", 
            a: ["We should protect the environment.", "We environment should protect the.", "Should we protect the environment.", "The environment should we protect."], 
            correct: 0, 
            explain: "S + should + V + O.",
            trans: "D·ªãch: Ch√∫ng ta n√™n b·∫£o v·ªá m√¥i tr∆∞·ªùng."
        },
        {
            q: "Rearrange: opens / The / 8 a.m. / market / at / .", 
            a: ["The market opens at 8 a.m.", "The market at 8 a.m. opens.", "At 8 a.m. the market opens.", "Opens the market at 8 a.m."], 
            correct: 0, 
            explain: "S + V + Time (L·ªãch tr√¨nh).",
            trans: "D·ªãch: Ch·ª£ m·ªü c·ª≠a l√∫c 8 gi·ªù s√°ng."
        },

        // --- READING COMPREHENSION (CLOZE TEXT) ---
        {
            q: "<div class='reading-passage'>Global warming is a serious problem. It causes the Earth's temperature to (1)______. This leads to the melting of polar (2)______ caps. As a result, sea levels are (3)______.<br></div>Choose the best word for (1):", 
            a: ["rise", "fall", "drop", "stop"], 
            correct: 0, 
            explain: "Temperature rises = nhi·ªát ƒë·ªô tƒÉng.",
            trans: "D·ªãch b√†i ƒë·ªçc: S·ª± n√≥ng l√™n to√†n c·∫ßu l√† v·∫•n ƒë·ªÅ nghi√™m tr·ªçng. N√≥ l√†m nhi·ªát ƒë·ªô Tr√°i ƒê·∫•t tƒÉng l√™n. ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn bƒÉng ·ªü c√°c c·ª±c tan ch·∫£y. K·∫øt qu·∫£ l√† m·ª±c n∆∞·ªõc bi·ªÉn ƒëang d√¢ng cao."
        },
        {
            q: "<div class='reading-passage'>Global warming is a serious problem. It causes the Earth's temperature to (1)______. This leads to the melting of polar (2)______ caps. As a result, sea levels are (3)______.<br></div>Choose the best word for (2):", 
            a: ["ice", "snow", "water", "land"], 
            correct: 0, 
            explain: "Polar ice caps = ch·ªèm bƒÉng ƒë·ªãa c·ª±c.",
            trans: "D·ªãch b√†i ƒë·ªçc: (Xem c√¢u tr∆∞·ªõc)"
        },

        // --- COMMUNICATION ---
        {
            q: "Mark: 'What time does the bus leave?' <br>Jenny: '______'", 
            a: ["It leaves at 10 o'clock.", "It is leaving now.", "It will leave soon.", "It left yesterday."], 
            correct: 0, 
            explain: "C√¢u h·ªèi v·ªÅ l·ªãch tr√¨nh (timetable) -> Tr·∫£ l·ªùi d√πng Hi·ªán t·∫°i ƒë∆°n.",
            trans: "D·ªãch: Mark: 'Xe bu√Ωt r·ªùi ƒëi l√∫c m·∫•y gi·ªù?' - Jenny: 'N√≥ r·ªùi ƒëi l√∫c 10 gi·ªù.'"
        },
        {
            q: "A: 'The flood destroyed everything.' <br>B: '______'", 
            a: ["That's terrible!", "That's great!", "You're welcome.", "Good idea."], 
            correct: 0, 
            explain: "Chia s·∫ª n·ªói bu·ªìn/ƒë·ªìng c·∫£m -> That's terrible!",
            trans: "D·ªãch: A: 'L≈© l·ª•t ƒë√£ ph√° h·ªßy m·ªçi th·ª©.' - B: 'Th·∫≠t kh·ªßng khi·∫øp!'"
        },

        // --- ERROR IDENTIFICATION ---
        {
            q: "Find the mistake: <br><u>The</u> plane <u>land</u> at 10:30 <u>tomorrow</u> morning.", 
            a: ["land", "The", "at", "tomorrow"], 
            correct: 0, 
            explain: "Sai 'land'. Ch·ªß ng·ªØ s·ªë √≠t 'The plane' + l·ªãch tr√¨nh -> lands.",
            trans: "D·ªãch: M√°y bay h·∫° c√°nh l√∫c 10:30 s√°ng mai."
        },
        {
            q: "Find the mistake: <br>I <u>was</u> <u>walk</u> down the street <u>when</u> it <u>rained</u>.", 
            a: ["walk", "was", "when", "rained"], 
            correct: 0, 
            explain: "Sai 'walk'. Ph·∫£i l√† 'walking' (Qu√° kh·ª© ti·∫øp di·ªÖn: was walking).",
            trans: "D·ªãch: T√¥i ƒëang ƒëi b·ªô xu·ªëng ph·ªë th√¨ tr·ªùi m∆∞a."
        },

        // --- C√ÅC C√ÇU H·ªéI M·ªû R·ªòNG (VOCAB & GRAMMAR) ---
        {q: "The synonym of 'rubbish' is ______.", a: ["garbage", "garden", "garage", "gold"], correct: 0, explain: "Rubbish = Garbage (R√°c).", trans: "D·ªãch: T·ª´ ƒë·ªìng nghƒ©a v·ªõi 'rubbish' l√† 'garbage' (r√°c)."},
        {q: "The antonym of 'safe' is ______.", a: ["dangerous", "careful", "secure", "clean"], correct: 0, explain: "Safe (an to√†n) >< Dangerous (nguy hi·ªÉm).", trans: "D·ªãch: T·ª´ tr√°i nghƒ©a v·ªõi 'safe' l√† 'dangerous' (nguy hi·ªÉm)."},
        {q: "Thermal pollution means the change in water ______.", a: ["temperature", "color", "taste", "level"], correct: 0, explain: "Thermal = nhi·ªát -> Temperature.", trans: "D·ªãch: √î nhi·ªÖm nhi·ªát c√≥ nghƒ©a l√† s·ª± thay ƒë·ªïi nhi·ªát ƒë·ªô n∆∞·ªõc."},
        {q: "A ______ occurs when there is no rain for a long time.", a: ["drought", "flood", "storm", "wind"], correct: 0, explain: "Drought = h·∫°n h√°n.", trans: "D·ªãch: H·∫°n h√°n x·∫£y ra khi kh√¥ng c√≥ m∆∞a trong m·ªôt th·ªùi gian d√†i."},
        {q: "When a volcano erupts, it sends ______ into the sky.", a: ["ash", "water", "ice", "wood"], correct: 0, explain: "Ash = tro b·ª•i.", trans: "D·ªãch: Khi n√∫i l·ª≠a phun tr√†o, n√≥ b·∫Øn tro b·ª•i l√™n b·∫ßu tr·ªùi."},
        {q: "Goods that are grown or made at home are ______.", a: ["home-grown", "homemade", "imported", "exported"], correct: 0, explain: "Home-grown/Home-made.", trans: "D·ªãch: H√†ng h√≥a ƒë∆∞·ª£c tr·ªìng ho·∫∑c l√†m t·∫°i nh√† g·ªçi l√† 'home-grown' (c√¢y tr·ªìng) ho·∫∑c 'homemade' (ƒë·ªì l√†m)."},
        {q: "An open-air market is usually ______.", a: ["outdoors", "indoors", "online", "virtual"], correct: 0, explain: "Open-air = ngo√†i tr·ªùi.", trans: "D·ªãch: Ch·ª£ tr·ªùi th∆∞·ªùng ·ªü ngo√†i tr·ªùi."},
        {q: "He is a ______. He buys things.", a: ["customer", "seller", "owner", "guard"], correct: 0, explain: "Customer = kh√°ch h√†ng.", trans: "D·ªãch: Anh ·∫•y l√† kh√°ch h√†ng. Anh ·∫•y mua ƒë·ªì."},
        {q: "Before I go to bed, I always ______ the doors.", a: ["lock", "locking", "locked", "locks"], correct: 0, explain: "Hi·ªán t·∫°i ƒë∆°n ch·ªâ th√≥i quen.", trans: "D·ªãch: Tr∆∞·ªõc khi ƒëi ng·ªß, t√¥i lu√¥n kh√≥a c·ª≠a."},
        {q: "While mom was cooking, dad ______ the paper.", a: ["was reading", "read", "is reading", "reads"], correct: 0, explain: "Hai h√†nh ƒë·ªông song song trong qu√° kh·ª© -> QKTD.", trans: "D·ªãch: Trong khi m·∫π ƒëang n·∫•u ƒÉn, b·ªë ƒëang ƒë·ªçc b√°o."},
        {q: "The building ______ in 1990.", a: ["was built", "built", "is built", "has been built"], correct: 0, explain: "In 1990 -> B·ªã ƒë·ªông qu√° kh·ª© ƒë∆°n.", trans: "D·ªãch: T√≤a nh√† ƒë∆∞·ª£c x√¢y d·ª±ng v√†o nƒÉm 1990."},
        {q: "If we ______ water, we will save money.", a: ["save", "saved", "will save", "saving"], correct: 0, explain: "C√¢u ƒëi·ªÅu ki·ªán lo·∫°i 1.", trans: "D·ªãch: N·∫øu ch√∫ng ta ti·∫øt ki·ªám n∆∞·ªõc, ch√∫ng ta s·∫Ω ti·∫øt ki·ªám ti·ªÅn."},
        {q: "We should ______ public transport to reduce pollution.", a: ["use", "using", "used", "uses"], correct: 0, explain: "Should + V nguy√™n th·ªÉ.", trans: "D·ªãch: Ch√∫ng ta n√™n s·ª≠ d·ª•ng ph∆∞∆°ng ti·ªán c√¥ng c·ªông ƒë·ªÉ gi·∫£m √¥ nhi·ªÖm."},
        {q: "Plastic bags take years to ______.", a: ["decompose", "appear", "make", "burn"], correct: 0, explain: "Decompose = ph√¢n h·ªßy.", trans: "D·ªãch: T√∫i nilon m·∫•t nhi·ªÅu nƒÉm ƒë·ªÉ ph√¢n h·ªßy."},
        {q: "______ is the air, water, and land in or on which people, animals, and plants live.", a: ["Environment", "Planet", "Earth", "Space"], correct: 0, explain: "ƒê·ªãnh nghƒ©a m√¥i tr∆∞·ªùng.", trans: "D·ªãch: M√¥i tr∆∞·ªùng l√† kh√¥ng kh√≠, n∆∞·ªõc v√† ƒë·∫•t n∆°i con ng∆∞·ªùi, ƒë·ªông v·∫≠t v√† th·ª±c v·∫≠t sinh s·ªëng."},
        {q: "A ______ is a strong wind that blows in a circle.", a: ["tornado", "rain", "snow", "fog"], correct: 0, explain: "ƒê·ªãnh nghƒ©a l·ªëc xo√°y.", trans: "D·ªãch: L·ªëc xo√°y l√† c∆°n gi√≥ m·∫°nh th·ªïi theo v√≤ng tr√≤n."},
        {q: "The shaking of the ground caused buildings to ______.", a: ["collapse", "stand", "build", "grow"], correct: 0, explain: "Collapse = s·ª•p ƒë·ªï.", trans: "D·ªãch: S·ª± rung chuy·ªÉn c·ªßa m·∫∑t ƒë·∫•t khi·∫øn c√°c t√≤a nh√† s·ª•p ƒë·ªï."},
        {q: "People had to ______ their homes due to the fire.", a: ["evacuate", "stay", "build", "clean"], correct: 0, explain: "Evacuate = s∆° t√°n.", trans: "D·ªãch: M·ªçi ng∆∞·ªùi ph·∫£i s∆° t√°n kh·ªèi nh√† do h·ªèa ho·∫°n."},
        {q: "Put the rubbish in the ______.", a: ["dustbin", "floor", "river", "sky"], correct: 0, explain: "Dustbin = th√πng r√°c.", trans: "D·ªãch: H√£y b·ªè r√°c v√†o th√πng r√°c."},
        {q: "I have a ______ about this product. It's broken.", a: ["complaint", "compliment", "comment", "question"], correct: 0, explain: "Complaint = l·ªùi ph√†n n√†n.", trans: "D·ªãch: T√¥i c√≥ m·ªôt l·ªùi ph√†n n√†n v·ªÅ s·∫£n ph·∫©m n√†y. N√≥ b·ªã h·ªèng."},
        {q: "The shop assistant was very ______.", a: ["helpful", "help", "helpless", "helping"], correct: 0, explain: "Helpful = hay gi√∫p ƒë·ª°/c√≥ √≠ch.", trans: "D·ªãch: Nh√¢n vi√™n b√°n h√†ng r·∫•t nhi·ªát t√¨nh gi√∫p ƒë·ª°."},
        {q: "Is this item ______ stock?", a: ["in", "on", "at", "of"], correct: 0, explain: "In stock = c√≤n h√†ng.", trans: "D·ªãch: M√≥n h√†ng n√†y c√≤n trong kho kh√¥ng?"},
        {q: "Sorry, we are ______ of stock.", a: ["out", "off", "in", "over"], correct: 0, explain: "Out of stock = h·∫øt h√†ng.", trans: "D·ªãch: Xin l·ªói, ch√∫ng t√¥i ƒë√£ h·∫øt h√†ng."},
        {q: "Can I pay ______ cash?", a: ["in", "by", "on", "with"], correct: 0, explain: "In cash = b·∫±ng ti·ªÅn m·∫∑t.", trans: "D·ªãch: T√¥i c√≥ th·ªÉ tr·∫£ b·∫±ng ti·ªÅn m·∫∑t kh√¥ng?"},
        {q: "Can I pay ______ credit card?", a: ["by", "in", "on", "with"], correct: 0, explain: "By credit card = b·∫±ng th·∫ª.", trans: "D·ªãch: T√¥i c√≥ th·ªÉ tr·∫£ b·∫±ng th·∫ª t√≠n d·ª•ng kh√¥ng?"},
        {q: "The concert ______ at 7 p.m.", a: ["starts", "starting", "start", "will start"], correct: 0, explain: "L·ªãch tr√¨nh -> starts.", trans: "D·ªãch: Bu·ªïi h√≤a nh·∫°c b·∫Øt ƒë·∫ßu l√∫c 7 gi·ªù t·ªëi."},
        {q: "While I ______ for the bus, I met my teacher.", a: ["was waiting", "waited", "am waiting", "wait"], correct: 0, explain: "Was waiting (ƒëang ƒë·ª£i th√¨ g·∫∑p).", trans: "D·ªãch: Trong khi t√¥i ƒëang ƒë·ª£i xe bu√Ωt, t√¥i g·∫∑p gi√°o vi√™n c·ªßa m√¨nh."},
        {q: "The trees ______ down by the wind.", a: ["were blown", "blew", "was blown", "blowing"], correct: 0, explain: "Were blown (b·ªã th·ªïi bay).", trans: "D·ªãch: Nh·ªØng c√°i c√¢y b·ªã gi√≥ th·ªïi bay."},
        {q: "Look at those clouds! It ______ rain.", a: ["is going to", "will", "does", "is"], correct: 0, explain: "D·ª± ƒëo√°n c√≥ cƒÉn c·ª© -> is going to.", trans: "D·ªãch: Nh√¨n ƒë√°m m√¢y kia k√¨a! Tr·ªùi s·∫Øp m∆∞a r·ªìi."},
        {q: "This is the ______ expensive dress in the shop.", a: ["most", "more", "much", "many"], correct: 0, explain: "So s√°nh nh·∫•t.", trans: "D·ªãch: ƒê√¢y l√† chi·∫øc v√°y ƒë·∫Øt nh·∫•t trong c·ª≠a h√†ng."},
        {q: "Recycling is good ______ the environment.", a: ["for", "to", "with", "at"], correct: 0, explain: "Good for = t·ªët cho.", trans: "D·ªãch: T√°i ch·∫ø th√¨ t·ªët cho m√¥i tr∆∞·ªùng."},
        {q: "We must prevent people ______ cutting down trees.", a: ["from", "of", "off", "to"], correct: 0, explain: "Prevent form = ngƒÉn ch·∫∑n kh·ªèi.", trans: "D·ªãch: Ch√∫ng ta ph·∫£i ngƒÉn ch·∫∑n m·ªçi ng∆∞·ªùi ch·∫∑t ph√° c√¢y."},
        {q: "The river smells ______.", a: ["terrible", "terribly", "badly", "well"], correct: 0, explain: "Smell + adj (ƒë·ªông t·ª´ ch·ªâ gi√°c quan).", trans: "D·ªãch: Con s√¥ng c√≥ m√πi r·∫•t kinh kh·ªßng."},
        {q: "It's important ______ wildlife.", a: ["to protect", "protecting", "protect", "protected"], correct: 0, explain: "It's adj + to V.", trans: "D·ªãch: Vi·ªác b·∫£o v·ªá ƒë·ªông v·∫≠t hoang d√£ l√† r·∫•t quan tr·ªçng."},
        {q: "She is interested in ______ new clothes.", a: ["buying", "buy", "to buy", "bought"], correct: 0, explain: "Interested in + Ving.", trans: "D·ªãch: C√¥ ·∫•y th√≠ch mua qu·∫ßn √°o m·ªõi."},
        {q: "My mother ______ me a new bike last week.", a: ["bought", "buys", "will buy", "buy"], correct: 0, explain: "Last week -> QKƒê.", trans: "D·ªãch: M·∫π t√¥i ƒë√£ mua cho t√¥i m·ªôt chi·∫øc xe ƒë·∫°p m·ªõi v√†o tu·∫ßn tr∆∞·ªõc."},
        {q: "We ______ to Da Nang three times.", a: ["have been", "were", "go", "went"], correct: 0, explain: "Three times -> HTHT.", trans: "D·ªãch: Ch√∫ng t√¥i ƒë√£ ƒë·∫øn ƒê√† N·∫µng ba l·∫ßn."},
        {q: "I used ______ to school by bus.", a: ["to go", "go", "going", "went"], correct: 0, explain: "Used to + V (th√≥i quen qu√° kh·ª©).", trans: "D·ªãch: T√¥i ƒë√£ t·ª´ng ƒëi h·ªçc b·∫±ng xe bu√Ωt."},
        {q: "Stop ______ noise! The baby is sleeping.", a: ["making", "to make", "make", "made"], correct: 0, explain: "Stop + Ving (d·ª´ng h·∫≥n vi·ªác ƒëang l√†m).", trans: "D·ªãch: Ng·ª´ng l√†m ·ªìn ƒëi! Em b√© ƒëang ng·ªß."},
        {q: "Remember ______ the door.", a: ["to lock", "locking", "lock", "locked"], correct: 0, explain: "Remember to V (nh·ªõ ph·∫£i l√†m g√¨).", trans: "D·ªãch: Nh·ªõ kh√≥a c·ª≠a nh√©."},
        {q: "Try ______ this shirt on.", a: ["putting", "to put", "put", "puts"], correct: 0, explain: "Try + Ving (th·ª≠ l√†m g√¨).", trans: "D·ªãch: H√£y th·ª≠ m·∫∑c chi·∫øc √°o n√†y xem."},
        {q: "The water is too dirty ______ drink.", a: ["to", "for", "that", "so"], correct: 0, explain: "Too + adj + to V.", trans: "D·ªãch: N∆∞·ªõc qu√° b·∫©n ƒë·ªÉ u·ªëng."},
        {q: "It was ______ a cold day that we stayed home.", a: ["such", "so", "very", "too"], correct: 0, explain: "Such a ... that.", trans: "D·ªãch: ƒê√≥ l√† m·ªôt ng√†y l·∫°nh ƒë·∫øn n·ªói ch√∫ng t√¥i ƒë√£ ·ªü nh√†."},
        {q: "Which word has the sound /k/?", a: ["School", "Cheap", "Machine", "Chef"], correct: 0, explain: "School /k/. Cheap /t É/, Machine/Chef / É/.", trans: "D·ªãch: T·ª´ n√†o c√≥ √¢m /k/? -> School."},
        {q: "The sign says 'No Littering'. It means you ______ put rubbish in the bin.", a: ["must", "can", "shouldn't", "may"], correct: 0, explain: "Must (ph·∫£i).", trans: "D·ªãch: Bi·ªÉn b√°o ghi 'C·∫•m x·∫£ r√°c'. C√≥ nghƒ©a l√† b·∫°n ph·∫£i b·ªè r√°c v√†o th√πng."},
        {q: "You ______ run in the school hall.", a: ["mustn't", "don't have to", "should", "can"], correct: 0, explain: "Mustn't (c·∫•m).", trans: "D·ªãch: B·∫°n kh√¥ng ƒë∆∞·ª£c ch·∫°y trong s·∫£nh tr∆∞·ªùng."}
    ];

    // SINH T·ª∞ ƒê·ªòNG C√ÅC C√ÇU C√íN L·∫†I CHO ƒê·ª¶ 150 (V·∫™N C√ì D·ªäCH)
    const extraSubjects = ["My father", "The teacher", "John", "Sarah", "The doctor"];
    const extraVerbs = [
        {en: "arrives", vi: "ƒë·∫øn"}, 
        {en: "leaves", vi: "r·ªùi ƒëi"}, 
        {en: "opens", vi: "m·ªü c·ª≠a"}, 
        {en: "closes", vi: "ƒë√≥ng c·ª≠a"}, 
        {en: "starts", vi: "b·∫Øt ƒë·∫ßu"}, 
        {en: "ends", vi: "k·∫øt th√∫c"}
    ];
    const extraTimes = ["at 6 p.m.", "tomorrow", "next week", "tonight"];

    // 1. Schedule (L·ªãch tr√¨nh)
    for(let i=0; i<30; i++) {
        let s = extraSubjects[i % extraSubjects.length];
        let v = extraVerbs[i % extraVerbs.length];
        let t = extraTimes[i % extraTimes.length];
        rawQuestions.push({
            q: `Grammar: ${s} ______ ${t}.`,
            a: [v.en, `will ${v.en.replace('s','')}`, `is ${v.en.replace('s','ing')}`, `has ${v.en.replace('s','ed')}`],
            correct: 0,
            explain: `L·ªãch tr√¨nh (Schedule) d√πng th√¨ Hi·ªán t·∫°i ƒë∆°n: ${v.en}.`,
            trans: `D·ªãch: ${s} ${v.vi} ${t}. (L·ªãch tr√¨nh)`
        });
    }

    // 2. Passive Voice (B·ªã ƒë·ªông)
    const passiveSubj = ["The cake", "The letter", "The bridge", "The song", "The email"];
    const passiveAct = [
        {en: "eaten", vi: "ƒÉn"}, 
        {en: "written", vi: "vi·∫øt"}, 
        {en: "built", vi: "x√¢y"}, 
        {en: "sung", vi: "h√°t"}, 
        {en: "sent", vi: "g·ª≠i"}
    ];
    
    for(let i=0; i<30; i++) {
        let s = passiveSubj[i % passiveSubj.length];
        let v = passiveAct[i % passiveAct.length];
        rawQuestions.push({
            q: `Grammar: ${s} ______ by him yesterday.`,
            a: [`was ${v.en}`, `is ${v.en}`, `were ${v.en}`, `has been ${v.en}`],
            correct: 0,
            explain: `B·ªã ƒë·ªông qu√° kh·ª© ƒë∆°n (s·ªë √≠t): was ${v.en}.`,
            trans: `D·ªãch: ${s} ƒë√£ ƒë∆∞·ª£c ${v.vi} b·ªüi anh ·∫•y ng√†y h√¥m qua.`
        });
    }

    // 3. Past Continuous (Ti·∫øp di·ªÖn)
    const pcSubj = ["I", "He", "She", "Tom", "My mom"];
    const pcVerbs = [
        {en: "reading", vi: "ƒë·ªçc"},
        {en: "sleeping", vi: "ng·ªß"},
        {en: "working", vi: "l√†m vi·ªác"},
        {en: "cooking", vi: "n·∫•u ƒÉn"}
    ];
    const pcTimes = ["at 7 p.m yesterday", "at this time last night"];

    for(let i=0; i<20; i++) {
        let s = pcSubj[i % pcSubj.length];
        let v = pcVerbs[i % pcVerbs.length];
        let t = pcTimes[i % pcTimes.length];
        rawQuestions.push({
            q: `Grammar: ${s} ______ ${v.en} ${t}.`,
            a: [`was`, `were`, `is`, `are`],
            correct: 0,
            explain: `Qu√° kh·ª© ti·∫øp di·ªÖn v·ªõi ch·ªß ng·ªØ s·ªë √≠t '${s}' -> was.`,
            trans: `D·ªãch: ${s} ƒëang ${v.vi} ${t}.`
        });
    }

    // ========================================================================
    // LOGIC GAME
    // ========================================================================
    let questions = []; 
    let currentQuestionIndex = 0;
    let score = 0;
    let isPlaying = false;
    const audio = document.getElementById('bg-music');

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function toggleMusic() {
        if (audio.paused) {
            audio.play().catch(e => alert("Ch·∫°m m√†n h√¨nh ƒë·ªÉ b·∫≠t nh·∫°c!"));
            document.getElementById('music-control').classList.add('music-playing');
        } else {
            audio.pause();
            document.getElementById('music-control').classList.remove('music-playing');
        }
    }

    function startGame() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('end-screen').classList.add('hidden');
        document.getElementById('game-ui').classList.remove('hidden');

        score = 0;
        currentQuestionIndex = 0;
        questions = shuffleArray([...rawQuestions]).slice(0, 150); 
        
        isPlaying = true;
        updateScore();
        showQuestion();

        if(audio.paused) toggleMusic();
    }

    function showQuestion() {
        if (currentQuestionIndex >= questions.length) {
            endGame();
            return;
        }
        
        const qData = questions[currentQuestionIndex];
        
        document.getElementById('question-text').innerHTML = `[${currentQuestionIndex + 1}] ${qData.q}`;
        document.getElementById('progress-display').innerText = `Question: ${currentQuestionIndex + 1}/${questions.length}`;
        
        document.getElementById('explanation-area').classList.add('hidden');
        document.getElementById('btn-next').style.display = 'none';

        const optionsDiv = document.getElementById('options-container');
        optionsDiv.innerHTML = '';
        let indices = [0, 1, 2, 3];
        shuffleArray(indices);

        indices.forEach(index => {
            const btn = document.createElement('button');
            btn.className = 'btn-option';
            btn.innerHTML = qData.a[index]; 
            btn.onclick = () => checkAnswer(index, qData.correct, btn);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selectedIndex, correctIndex, btnElement) {
        if (!isPlaying) return;
        
        const allBtns = document.querySelectorAll('.btn-option');
        allBtns.forEach(b => b.disabled = true);

        if (selectedIndex === correctIndex) {
            btnElement.classList.add('correct');
            score += 10;
        } else {
            btnElement.classList.add('wrong');
            allBtns.forEach(b => {
                if(b.innerHTML === questions[currentQuestionIndex].a[correctIndex]) {
                    b.classList.add('correct');
                }
            });
        }
        updateScore();

        // HI·ªÜN GI·∫¢I TH√çCH & D·ªäCH
        document.getElementById('explanation-text').innerText = questions[currentQuestionIndex].explain;
        // Ki·ªÉm tra xem c√≥ ph·∫ßn d·ªãch kh√¥ng, n·∫øu c√≥ th√¨ hi·ªán
        if(questions[currentQuestionIndex].trans) {
            document.getElementById('trans-text').innerText = questions[currentQuestionIndex].trans;
            document.getElementById('trans-text').style.display = 'block';
        } else {
            document.getElementById('trans-text').style.display = 'none';
        }

        document.getElementById('explanation-area').classList.remove('hidden');
        document.getElementById('btn-next').style.display = 'block';
    }

    function nextQuestion() {
        currentQuestionIndex++;
        showQuestion();
    }

    function updateScore() {
        document.getElementById('score-display').innerText = `Score: ${score}`;
    }

    function endGame() {
        isPlaying = false;
        document.getElementById('game-ui').classList.add('hidden');
        document.getElementById('end-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = `Total Score: ${score} / ${questions.length * 10}`;
    }
    
    function createFlowers() {
        const container = document.getElementById('flowers');
        const symbols = ['üå∏', 'üçÇ', '‚ùÑÔ∏è', '‚òÄÔ∏è', 'üçÄ']; 
        for(let i=0; i<25; i++) {
            const el = document.createElement('div');
            el.className = 'flower';
            el.innerText = symbols[Math.floor(Math.random()*symbols.length)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.fontSize = (Math.random() * 20 + 10) + 'px';
            el.style.animationDuration = (Math.random() * 5 + 5) + 's';
            el.style.animationDelay = Math.random() * 5 + 's';
            container.appendChild(el);
        }
    }
    createFlowers();
</script>
</body>
</html>